# BMW E36 –¢–∞–±–ª–æ –î–µ–º–æ —Å Arduino Uno R3

–¢–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–∞ –∫–∞–∫ –¥–∞ —Å–µ —Å–≤—ä—Ä–∂–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–æ —Ç–∞–±–ª–æ –æ—Ç BMW E36 —Å Arduino Uno R3 –∏ –¥–∞ —Å–µ —Å–∏–º—É–ª–∏—Ä–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ –∫–∞—Ä–∞–Ω–µ. –ü—Ä–æ–µ–∫—Ç—ä—Ç –≥–µ–Ω–µ—Ä–∏—Ä–∞ —Ç–æ—á–Ω–∏ —Å–∏–≥–Ω–∞–ª–∏ –∑–∞ –æ–±–æ—Ä–æ—Ç–æ–º–µ—Ä–∞ –∏ –∫–∏–ª–æ–º–µ—Ç—Ä–∞–∂–∞, –∫–æ–∏—Ç–æ —Å–∞ –∫–∞–ª–∏–±—Ä–∏—Ä–∞–Ω–∏ —Å–ø–æ—Ä–µ–¥ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—Ç–µ BMW E36 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞ —Å–∏–º—É–ª–∞—Ü–∏—è –Ω–∞ –∫–∞—Ä–∞–Ω–µ** - –ø—ä–ª–µ–Ω —Ü–∏–∫—ä–ª –æ—Ç —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è –¥–æ —Å–ø–∏—Ä–∞–Ω–µ
- **–ê–≤—Ç–µ–Ω—Ç–∏—á–Ω–∏ BMW E36 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏**:
  - –û–±–æ—Ä–æ—Ç–æ–º–µ—Ä: 3 –∏–º–ø—É–ª—Å–∞ –Ω–∞ –æ–±–æ—Ä–æ—Ç –Ω–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è (6-—Ü–∏–ª–∏–Ω–¥—Ä–æ–≤ –¥–≤–∏–≥–∞—Ç–µ–ª)
  - –ö–∏–ª–æ–º–µ—Ç—Ä–∞–∂: 9 –∏–º–ø—É–ª—Å–∞ –Ω–∞ –æ–±–æ—Ä–æ—Ç –Ω–∞ –¥–∏—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª–∞
- **–ü–ª–∞–≤–Ω–∏ –ø—Ä–µ—Ö–æ–¥–∏** —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∏ –∑–∞–±–∞–≤—è–Ω–µ
- **–°–∏–º—É–ª–∞—Ü–∏—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–Ω–∏ —Å—Ç–µ–ø–µ–Ω–∏** —Å –Ω–∞–º–∞–ª—è–≤–∞–Ω–µ –Ω–∞ –æ–±–æ—Ä–æ—Ç–∏—Ç–µ –ø—Ä–∏ –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ
- **–ö–∞–ª–∏–±—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ñ–∞–∫—Ç–æ—Ä–∏** –∑–∞ —Ç–æ—á–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–≤–∞–Ω–µ —Å–ø–æ—Ä–µ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—Ç–æ —Ç–∞–±–ª–æ
- **–ü—ä–ª–µ–Ω –¥–µ–º–æ —Ü–∏–∫—ä–ª** –æ—Ç 100 —Å–µ–∫—É–Ω–¥–∏ —Å —Ä–∞–∑–ª–∏—á–Ω–∏ —Ñ–∞–∑–∏ –Ω–∞ –∫–∞—Ä–∞–Ω–µ

## –•–∞—Ä–¥—É–µ—Ä–Ω–∏ –ò–∑–∏—Å–∫–≤–∞–Ω–∏—è

- Arduino Uno R3
- BMW E36 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª–Ω–æ —Ç–∞–±–ª–æ
- –°–≤—ä—Ä–∑–≤–∞—â–∏ –ø—Ä–æ–≤–æ–¥–Ω–∏—Ü–∏
- 12V –∑–∞—Ö—Ä–∞–Ω–≤–∞–Ω–µ –∑–∞ —Ç–∞–±–ª–æ—Ç–æ

## –°–≤—ä—Ä–∑–≤–∞–Ω–µ

**–í–∞–∂–Ω–æ**: –¢–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç –∏–∑–ø–æ–ª–∑–≤–∞ —Å–∞–º–æ —Å–∏–≥–Ω–∞–ª–∏—Ç–µ –∑–∞ –æ–±–æ—Ä–æ—Ç–æ–º–µ—Ä –∏ –∫–∏–ª–æ–º–µ—Ç—Ä–∞–∂. –ù–µ —Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–∏—è –∑–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ –≥–æ—Ä–∏–≤–æ.

![BMW E36 Cluster Wiring](media/wiring-diagram.jpg)
*–î–∏–∞–≥—Ä–∞–º–∞ –Ω–∞ —Å–≤—ä—Ä–∑–≤–∞–Ω–∏—è—Ç–∞ - –ö—Ä–µ–¥–∏—Ç: Melly (MorGuux)*

## üì∏ –ü—Ä–æ–µ–∫—Ç—ä—Ç –≤ –î–µ–π—Å—Ç–≤–∏–µ

![Demo Video](media/demo.gif)
*–í–∏–¥–µ–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ä–∞–±–æ—Ç–µ—â–æ—Ç–æ —Ç–∞–±–ª–æ - –ø–æ–∫–∞–∑–≤–∞ –ø–ª–∞–≤–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏ –≤ –æ–±–æ—Ä–æ—Ç–æ–º–µ—Ä–∞ –∏ –∫–∏–ª–æ–º–µ—Ç—Ä–∞–∂–∞*

![Arduino Setup](media/speedometer_back_wiring.JPG)
*Arduino Uno R3 —Å–≤—ä—Ä–∑–∞–Ω –∫—ä–º BMW E36 —Ç–∞–±–ª–æ—Ç–æ*


## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –î–µ—Ç–∞–π–ª–∏

### –°–∏–º—É–ª–∏—Ä–∞–Ω–∏ –î–∞—Ç—á–∏—Ü–∏

–ü—Ä–æ–µ–∫—Ç—ä—Ç —Å–∏–º—É–ª–∏—Ä–∞ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω–∏ –¥–∞—Ç—á–∏–∫–∞ –Ω–∞ BMW E36:

#### 1. –î–∞—Ç—á–∏–∫ –∑–∞ –û–±–æ—Ä–æ—Ç–∏ –Ω–∞ –î–≤–∏–≥–∞—Ç–µ–ª—è 
- **Arduino Pin 2** ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä–∞ 12V –∏–º–ø—É–ª—Å–Ω–∏ —Å–∏–≥–Ω–∞–ª–∏ –∑–∞ –æ–±–æ—Ä–æ—Ç–æ–º–µ—Ä–∞
- **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è**: 3 –∏–º–ø—É–ª—Å–∞ –Ω–∞ –æ–±–æ—Ä–æ—Ç –Ω–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è (6-—Ü–∏–ª–∏–Ω–¥—Ä–æ–≤ –¥–≤–∏–≥–∞—Ç–µ–ª)
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∏**: –ó–∞ –≤—Å–µ–∫–∏ –æ–±–æ—Ä–æ—Ç –Ω–∞ –∫–æ–ª—è–Ω–æ–≤–∏—è –≤–∞–ª, –¥–∞—Ç—á–∏–∫—ä—Ç –≥–µ–Ω–µ—Ä–∏—Ä–∞ 3 –∏–º–ø—É–ª—Å–∞

#### 2. –î–∞—Ç—á–∏–∫ –∑–∞ –°–∫–æ—Ä–æ—Å—Ç (VSS - Vehicle Speed Sensor) 
- **Arduino Pin 3** ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä–∞ 12V –∏–º–ø—É–ª—Å–Ω–∏ —Å–∏–≥–Ω–∞–ª–∏ –∑–∞ –∫–∏–ª–æ–º–µ—Ç—Ä–∞–∂–∞
- **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è**: 9 –∏–º–ø—É–ª—Å–∞ –Ω–∞ –æ–±–æ—Ä–æ—Ç –Ω–∞ –¥–∏—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª–∞
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∏**: –î–∞—Ç—á–∏–∫—ä—Ç –Ω–∞ –¥–∏—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª–∞ –∑–∞—Å–∏—á–∞ –æ–±–æ—Ä–æ—Ç–∏—Ç–µ –Ω–∞ –∏–∑—Ö–æ–¥—è—â–∏—è –≤–∞–ª

### BMW E36 –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

–ü—Ä–æ–µ–∫—Ç—ä—Ç –µ —Ä–∞–∑—Ä–∞–±–æ—Ç–µ–Ω —Å —Ç–æ—á–Ω–∏—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –Ω–∞ BMW E36:

```cpp
const float PULSES_PER_ENGINE_REV = 3.0;    // 6-—Ü–∏–ª–∏–Ω–¥—Ä–æ–≤ = 3 –∏–º–ø—É–ª—Å–∞ –Ω–∞ –æ–±–æ—Ä–æ—Ç
const float PULSES_PER_DIFF_REV = 9.0;      // –°–µ–Ω–∑–æ—Ä –Ω–∞ –¥–∏—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª–∞ = 9 –∏–º–ø—É–ª—Å–∞ –Ω–∞ –æ–±–æ—Ä–æ—Ç
const float TIRE_CIRCUMFERENCE = 1.88;      // –º–µ—Ç—Ä–∞ (—Ç–∏–ø–∏—á–Ω–æ –∑–∞ E36 205/60R15)
const float FINAL_DRIVE_RATIO = 3.15;       // –¢–∏–ø–∏—á–Ω–æ —Å—ä–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –Ω–∞ –∑–∞–¥–Ω–∏—è –¥–∏—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª –∑–∞ E36
```

### –ö–∞–ª–∏–±—Ä–∞—Ü–∏–æ–Ω–Ω–∏ –§–∞–∫—Ç–æ—Ä–∏

–ó–∞ —Ç–æ—á–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–≤–∞–Ω–µ —Å–ø–æ—Ä–µ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—Ç–æ —Ç–∞–±–ª–æ:

```cpp
const float RPM_CALIBRATION_FACTOR = 1.2;   // –£–≤–µ–ª–∏—á–∞–≤–∞ —á–µ—Å—Ç–æ—Ç–∞—Ç–∞ –Ω–∞ –æ–±–æ—Ä–æ—Ç–æ–º–µ—Ä–∞
const float SPEED_CALIBRATION_FACTOR = 1.5; // –£–≤–µ–ª–∏—á–∞–≤–∞ —á–µ—Å—Ç–æ—Ç–∞—Ç–∞ –Ω–∞ –∫–∏–ª–æ–º–µ—Ç—Ä–∞–∂–∞
```

## –ö–∞–∫ –†–∞–±–æ—Ç–∏ –ö–æ–¥—ä—Ç

### –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ò–º–ø—É–ª—Å–∏

–ü—Ä–æ–µ–∫—Ç—ä—Ç –≥–µ–Ω–µ—Ä–∏—Ä–∞ –ø—Ä–µ—Ü–∏–∑–Ω–∏ –∏–º–ø—É–ª—Å–Ω–∏ —Å–∏–≥–Ω–∞–ª–∏:

```cpp
// –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –º–µ–∂–¥—É –∏–º–ø—É–ª—Å–∏—Ç–µ –∑–∞ –æ–±–æ—Ä–æ—Ç–æ–º–µ—Ä–∞
float rpmFreq = (currentRPM / 60.0) * PULSES_PER_ENGINE_REV * RPM_CALIBRATION_FACTOR;
rpmPulseInterval = (unsigned long)(500000.0 / rpmFreq);

// –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –º–µ–∂–¥—É –∏–º–ø—É–ª—Å–∏—Ç–µ –∑–∞ –∫–∏–ª–æ–º–µ—Ç—Ä–∞–∂–∞
float metersPerSecond = currentSpeed / 3.6;
float diffRevsPerSecond = metersPerSecond / TIRE_CIRCUMFERENCE;
float speedFreq = diffRevsPerSecond * PULSES_PER_DIFF_REV * SPEED_CALIBRATION_FACTOR;
speedPulseInterval = (unsigned long)(500000.0 / speedFreq);
```

### –ü–ª–∞–≤–Ω–∏ –ü—Ä–µ—Ö–æ–¥–∏

–°–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–∑–ø–æ–ª–∑–≤–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–∞–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏ –∑–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

```cpp
// –ü–ª–∞–≤–Ω–æ —É—Å–∫–æ—Ä–µ–Ω–∏–µ/–∑–∞–±–∞–≤—è–Ω–µ
if (abs(speedDiff) > 0.5) {
    currentSpeed += (speedDiff > 0) ? 0.8 : -1.2;  // –ó–∞–±–∞–≤—è–Ω–µ—Ç–æ –µ –ø–æ-–±—ä—Ä–∑–æ
}

// –ü–ª–∞–≤–Ω–∞ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ –æ–±–æ—Ä–æ—Ç–∏—Ç–µ
if (abs(rpmDiff) > 20) {
    currentRPM += (rpmDiff > 0) ? 25 : -40;  // –û–±–æ—Ä–æ—Ç–∏—Ç–µ —Å–µ –ø—Ä–æ–º–µ–Ω—è—Ç –ø–æ-–±—ä—Ä–∑–æ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞
}
```

## üîÑ –ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—è –∏ –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ

1. **–°–≤—ä—Ä–∂–µ—Ç–µ —Ö–∞—Ä–¥—É–µ—Ä–∞** —Å–ø–æ—Ä–µ–¥ –¥–∏–∞–≥—Ä–∞–º–∞—Ç–∞ –ø–æ-–≥–æ—Ä–µ
2. **–ó–∞—Ä–µ–¥–µ—Ç–µ –∫–æ–¥–∞** –≤ Arduino IDE
3. **–ö–∞—á–µ—Ç–µ —Å–∫–µ—á–∞** –Ω–∞ Arduino Uno R3
4. **–í–∫–ª—é—á–µ—Ç–µ 12V –∑–∞—Ö—Ä–∞–Ω–≤–∞–Ω–µ—Ç–æ** –Ω–∞ —Ç–∞–±–ª–æ—Ç–æ
5. **–ù–∞–±–ª—é–¥–∞–≤–∞–π—Ç–µ –¥–µ–º–æ—Ç–æ** –≤ Serial Monitor (9600 baud)

### Serial Monitor –ò–∑—Ö–æ–¥

–ö–æ–¥—ä—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –ø–æ–¥—Ä–æ–±–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ:

```
BMW E36 Cluster - Complete Working Demo
Using proper BMW specifications:
- RPM: 3 pulses per engine revolution
- Speed: 9 pulses per differential revolution
- Smooth realistic acceleration/deceleration

Target - RPM: 2500, Speed: 65 km/h | Actual frequencies - RPM: 125.0 Hz, Speed: 45.2 Hz
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –ö–∞–ª–∏–±—Ä–∏—Ä–∞–Ω–µ

–ê–∫–æ —Ç–∞–±–ª–æ—Ç–æ –Ω–µ –ø–æ–∫–∞–∑–≤–∞ —Ç–æ—á–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏, –∫–æ—Ä–∏–≥–∏—Ä–∞–π—Ç–µ –∫–∞–ª–∏–±—Ä–∞—Ü–∏–æ–Ω–Ω–∏—Ç–µ —Ñ–∞–∫—Ç–æ—Ä–∏:

```cpp
// –£–≤–µ–ª–∏—á–µ—Ç–µ –∑–∞ –ø–æ-–≤–∏—Å–æ–∫–∏ –ø–æ–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –æ–±–æ—Ä–æ—Ç–æ–º–µ—Ä–∞
const float RPM_CALIBRATION_FACTOR = 1.2;   

// –£–≤–µ–ª–∏—á–µ—Ç–µ –∑–∞ –ø–æ-–≤–∏—Å–æ–∫–∏ –ø–æ–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –∫–∏–ª–æ–º–µ—Ç—Ä–∞–∂–∞  
const float SPEED_CALIBRATION_FACTOR = 1.5; 
```

---

## –õ–∏—Ü–µ–Ω–∑

–¢–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç –µ –ª–∏—Ü–µ–Ω–∑–∏—Ä–∞–Ω –ø–æ–¥ MIT License - –≤–∏–∂—Ç–µ [LICENSE](LICENSE) —Ñ–∞–π–ª–∞ –∑–∞ –¥–µ—Ç–∞–π–ª–∏.

**–ö—Ä–µ–¥–∏—Ç–∏**: –î–∏–∞–≥—Ä–∞–º–∞ –Ω–∞ —Å–≤—ä—Ä–∑–≤–∞–Ω–∏—è—Ç–∞ - Melly (MorGuux)

**–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–µ–Ω —Å Arduino IDE**
